<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>VideoKall - Family Video Calls</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<div class="app">
		<!-- Language Switcher -->
		<div class="language-switcher">
			<button id="lang-toggle" class="btn lang-btn" title="Change language">
				<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
					<circle cx="12" cy="12" r="10"/>
					<line x1="2" y1="12" x2="22" y2="12"/>
					<path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
				</svg>
				<span id="current-lang">EN</span>
			</button>
			<div id="lang-dropdown" class="lang-dropdown hidden">
				<button class="lang-option" data-lang="en">
					<span class="lang-flag">üá¨üáß</span>
					<span>English</span>
				</button>
				<button class="lang-option" data-lang="ru">
					<span class="lang-flag">üá∑üá∫</span>
					<span>–†—É—Å—Å–∫–∏–π</span>
				</button>
			</div>
		</div>
		
		<!-- Picture-in-Picture Control (shown during call, replaces language switcher) -->
		<button id="pip-top-btn" class="btn pip-top-btn hidden" data-i18n-title="call.pip" title="Picture in Picture">
			<svg class="icon-pip" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
				<rect x="2" y="3" width="20" height="14" rx="2"/>
				<rect x="11" y="9" width="9" height="6" rx="1"/>
			</svg>
		</button>
		
		<!-- Entry Screen (for direct join links) -->
		<div id="entry-screen" class="screen active">
			<div class="container">
				<div class="logo">
					<div class="logo-icon">
						<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
							<path d="M15.6 11.6L22 7v10l-6.4-4.6v-1z"/>
							<rect x="2" y="6" width="14" height="12" rx="2"/>
						</svg>
					</div>
					<h1 data-i18n="app.name">VideoKall</h1>
				</div>
				<p class="tagline" data-i18n="app.tagline">Simple video calls for family</p>
				
				<div class="entry-options">
					<div class="option-card" id="admin-option">
						<div class="option-icon">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>
								<path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z"/>
							</svg>
						</div>
						<h3 data-i18n="entry.adminAccess">Admin Access</h3>
						<p data-i18n="entry.adminDescription">Manage rooms with your special code</p>
						<div class="input-group">
							<input type="password" id="admin-code" data-i18n-placeholder="entry.adminCodePlaceholder" placeholder="Enter special code" autocomplete="off">
							<button id="admin-login-btn" class="btn primary" data-i18n="entry.accessButton">Access</button>
						</div>
					</div>
				</div>
				
				<div id="error-message" class="error-message"></div>
			</div>
		</div>
		
		<!-- Admin Panel Screen -->
		<div id="admin-screen" class="screen">
			<div class="admin-container">
				<div class="admin-header">
					<div class="logo-small">
						<div class="logo-icon small">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<path d="M15.6 11.6L22 7v10l-6.4-4.6v-1z"/>
								<rect x="2" y="6" width="14" height="12" rx="2"/>
							</svg>
						</div>
						<span data-i18n="admin.title">VideoKall Admin</span>
					</div>
					<button id="admin-logout-btn" class="btn text">
						<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
							<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
							<polyline points="16 17 21 12 16 7"/>
							<line x1="21" y1="12" x2="9" y2="12"/>
						</svg>
						<span data-i18n="admin.logout">Logout</span>
					</button>
				</div>
				
				<div class="admin-content">
					<div class="create-room-section">
						<h2 data-i18n="admin.createRoom">Create New Room</h2>
						<div class="create-room-form">
							<input type="text" id="new-room-name" data-i18n-placeholder="admin.roomNamePlaceholder" placeholder="Room name (e.g., Sunday Family Call)" autocomplete="off">
							<button id="create-room-btn" class="btn primary">
								<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
									<line x1="12" y1="5" x2="12" y2="19"/>
									<line x1="5" y1="12" x2="19" y2="12"/>
								</svg>
								<span data-i18n="admin.createButton">Create Room</span>
							</button>
						</div>
					</div>
					
					<div class="rooms-section">
						<h2 data-i18n="admin.yourRooms">Your Rooms</h2>
						<div id="rooms-list" class="rooms-list">
							<div class="loading-rooms" data-i18n="admin.loadingRooms">Loading rooms...</div>
						</div>
						<div id="no-rooms" class="no-rooms hidden">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="48" height="48">
								<rect x="2" y="6" width="20" height="12" rx="2"/>
								<path d="M22 10l-7 4 7 4V10z"/>
							</svg>
							<p data-i18n="admin.noRooms">No rooms yet. Create one above!</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<!-- Joining Screen (for direct join links) -->
		<div id="joining-screen" class="screen">
			<div class="container">
				<div class="joining-content">
					<div class="pulse-ring">
						<div class="pulse-circle"></div>
					</div>
					<h2 data-i18n="joining.title">Joining Call...</h2>
					<p id="joining-room-name" data-i18n="joining.connecting">Connecting to room</p>
					<button id="cancel-join-btn" class="btn text" data-i18n="joining.cancel">Cancel</button>
				</div>
			</div>
		</div>
		
		<!-- Call Screen -->
		<div id="call-screen" class="screen">
			<div class="video-container">
				<div id="videos-grid" class="videos-grid">
					<!-- Remote videos will be added here dynamically -->
				</div>
				<video id="local-video" autoplay playsinline muted></video>
				<div id="connection-status" class="connection-status" data-i18n="call.connecting">Connecting...</div>
				<div id="camera-debug-info" class="camera-debug-info"></div>
			</div>
			<div class="call-controls">
				<button id="toggle-audio-btn" class="btn control" data-i18n-title="call.toggleMic" title="Toggle microphone">
					<svg class="icon-mic-on" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
						<path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
						<line x1="12" y1="19" x2="12" y2="23"/>
						<line x1="8" y1="23" x2="16" y2="23"/>
					</svg>
					<svg class="icon-mic-off hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<line x1="1" y1="1" x2="23" y2="23"/>
						<path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"/>
						<path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"/>
						<line x1="12" y1="19" x2="12" y2="23"/>
						<line x1="8" y1="23" x2="16" y2="23"/>
					</svg>
				</button>
				<button id="toggle-video-btn" class="btn control" data-i18n-title="call.toggleCamera" title="Toggle camera">
					<svg class="icon-video-on" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<path d="M23 7l-7 5 7 5V7z"/>
						<rect x="1" y="5" width="15" height="14" rx="2"/>
					</svg>
					<svg class="icon-video-off hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<path d="M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"/>
						<line x1="1" y1="1" x2="23" y2="23"/>
					</svg>
				</button>
				<button id="switch-camera-btn" class="btn control hidden" data-i18n-title="call.switchCamera" title="Switch camera">
					<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<path d="M11 19H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h5"/>
						<path d="M13 5h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5"/>
						<circle cx="12" cy="12" r="3"/>
						<path d="M18 22l-3-3 3-3"/>
						<path d="M6 2l3 3-3 3"/>
					</svg>
				</button>
				<button id="leave-call-btn" class="btn control warning" data-i18n-title="call.leaveCall" title="Leave call">
					<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
						<polyline points="16 17 21 12 16 7"/>
						<line x1="21" y1="12" x2="9" y2="12"/>
					</svg>
				</button>
			</div>
		</div>
		
		<!-- Ended Screen -->
		<div id="ended-screen" class="screen">
			<div class="container">
				<div class="ended-content">
					<div class="ended-icon">
						<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
							<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
						</svg>
					</div>
					<h2 id="ended-title" data-i18n="ended.leftCall">Left Call</h2>
					<p id="ended-reason" data-i18n="ended.youLeft">You have left the call.</p>
					<div class="ended-actions">
						<button id="rejoin-btn" class="btn primary" data-i18n="ended.rejoin">Rejoin Call</button>
						<button id="back-home-btn" class="btn secondary" data-i18n="ended.backHome">Back to Home</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<script src="i18n.js"></script>
	<script type="module" src="app.js"></script>
</body>
</html>
